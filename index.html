<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>गगाणी परिवार वंशावली</title>
<style>
  body {
    font-family: "Noto Sans Devanagari", "Mangal", sans-serif;
    background: linear-gradient(120deg, #f0f4ff, #fdfcff);
    margin: 0;
    padding: 0;
  }
  header {
    background: #4b6bff;
    color: white;
    text-align: center;
    padding: 15px 10px 5px 10px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  header h1 {
    font-size: 32px;
    margin: 5px 0 10px 0;
    letter-spacing: 1px;
  }
  .search-container {
    margin-bottom: 10px;
    position: relative;
    text-align: center;
  }
  .search-container input {
    width: 90%;
    max-width: 400px;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    outline: none;
    font-size: 16px;
  }
  .search-results {
    position: absolute;
    background: white;
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    display: none;
    z-index: 1001;
    left: 50%;
    transform: translateX(-50%);
  }
  .search-results div {
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
    color: black;
  }
  .search-results div:hover {
    background: #eef2ff;
  }
  main {
    max-width: 1000px;
    margin: 40px auto;
    background: white;
    padding: 20px 30px;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
  }
  .tree ul {
    list-style-type: none;
    padding-left: 20px;
    margin: 0;
  }
  .tree li {
    position: relative;
    margin: 10px 0;
    padding: 10px 15px;
    background: #f9fbff;
    border: 1px solid #dde3ff;
    border-radius: 10px;
    transition: all 0.3s ease;
  }
  .tree li:hover {
    background: #eef2ff;
  }
  .tree li::before {
    content: "";
    position: absolute;
    top: -10px;
    left: -20px;
    border-left: 2px solid #cbd5ff;
    border-bottom: 2px solid #cbd5ff;
    width: 20px;
    height: 20px;
    border-radius: 0 0 0 8px;
  }
  .tree li:first-child::before {
    border-top: none;
  }
  .profile {
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 5px;
    border-radius: 8px;
    transition: background 0.3s, box-shadow 0.3s;
  }
  .profile svg {
    width: 35px;
    height: 35px;
  }
  .profile .person-name {
    font-weight: bold;
    color: #2f45ff;
    font-size: 18px;
  }
  .profile .details {
    font-size: 14px;
    color: #444;
    margin-left: 5px;
  }
  .highlight {
    background: #fff59d !important;
    box-shadow: 0 0 10px 3px #ffd700;
  }
  .children {
    margin-top: 10px;
    margin-left: 20px;
    border-left: 2px dashed #cfd5ff;
    padding-left: 10px;
    display: none;
  }
  .expanded > .children {
    display: block;
    animation: fadeIn 0.4s ease;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
  }
  footer {
    text-align: center;
    color: #666;
    margin: 30px 0;
    font-size: 14px;
  }
</style>
</head>
<body>
<header>
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="नाम से खोजें..." />
    <div class="search-results" id="searchResults"></div>
  </div>
  <h1>गगाणी परिवार</h1>
</header>

<main>
  <div class="tree" id="treeContainer"></div>
</main>

<footer>© गगाणी परिवार वंशावली | Designed with ❤️ by Anil</footer>

<script>
// SVGs
const maleSVG = `<svg viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="42" cy="42" r="42" fill="white"/><circle cx="42" cy="32" r="16" fill="#3854FF"/><path d="M42.001 51C55.6205 51 67.3106 59.2516 72.3506 71.0273C64.7042 79.0206 53.9331 84 41.998 84C30.0647 84 19.2946 79.0225 11.6484 71.0312C16.6874 59.2532 28.3798 51 42.001 51Z" fill="#3854FF"/></svg>`;
const femaleSVG = `<svg viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="42" cy="42" r="42" fill="white"/><circle cx="42" cy="32" r="16" fill="#FF006A"/><path d="M42.001 51C55.6205 51 67.3106 59.2516 72.3506 71.0273C64.7042 79.0206 53.9331 84 41.998 84C30.0647 84 19.2946 79.0225 11.6484 71.0312C16.6874 59.2532 28.3798 51 42.001 51Z" fill="#FF006A"/></svg>`;

// Family data
const familyData = [
  {
    name: "गागाजी",
    gender: "male",
    spouse: "सजनामा",
    village: "कलापरा,जसवंतपुरा",
    children: [
      {
        name: "भुताजी",
        gender: "male",
        spouse: "मधमुा",
        village: "व्याला",
        children: [
          { name: "वेलाजी", gender: "male", spouse: "रंगुमा", village: "रानीवाड़ा" },
          { name: "मगाजी", gender: "male", spouse: "त्रिजामा", village: "रानीवाड़ा" },
          { name: "हस्तुबेन", gender: "female", spouse: " ", village: "रेवड़ा" }
        ]
      },
      {
        name: "वलेाजी",
        gender: "male",
        spouse: "रगंमुा",
        village: "रानीवाड़ा",
        children: [
          { name: "पुत्र 1", gender: "male", spouse: "पत्नी 1", village: "गांव 1" },
          { name: "कन्या 1", gender: "female", spouse: "पति 2", village: "गांव 2" }
        ]
      }
    ]
  }
];

// Recursive tree builder
function buildTree(data) {
  const ul = document.createElement("ul");
  data.forEach(person => {
    const li = document.createElement("li");

    const profile = document.createElement("div");
    profile.className = "profile";
    
    // Show correct SVG for gender
    const svg = person.gender === "female" ? femaleSVG : maleSVG;

    // Show name + spouse + village if spouse exists
    let detailsText = "";
    if(person.spouse){
      detailsText = ` — ${person.spouse}${person.village ? " (" + person.village + ")" : ""}`;
    }

    profile.innerHTML = `
      ${svg}
      <span class="person-name">${person.name}</span>
      <span class="details">${detailsText}</span>
    `;

    li.appendChild(profile);

    if(person.children && person.children.length > 0){
      const childContainer = document.createElement("div");
      childContainer.className = "children";
      childContainer.appendChild(buildTree(person.children));
      li.appendChild(childContainer);

      profile.addEventListener("click", () => li.classList.toggle("expanded"));
    }

    ul.appendChild(li);
  });
  return ul;
}

document.getElementById("treeContainer").appendChild(buildTree(familyData));

// Flatten for search (spouse + village)
const allMembers = [];
function flattenFamily(data){
  data.forEach(p => {
    allMembers.push({
      name: p.name,
      spouse: p.spouse || "",
      village: p.village || ""
    });
    if(p.children) flattenFamily(p.children);
  });
}
flattenFamily(familyData);

// Search functionality
const searchInput = document.getElementById("searchInput");
const searchResults = document.getElementById("searchResults");

searchInput.addEventListener("input", () => {
  const query = searchInput.value.toLowerCase();
  searchResults.innerHTML = "";
  if(!query) { searchResults.style.display="none"; return; }

  const matches = allMembers.filter(m => m.name.toLowerCase().includes(query));
  if(matches.length > 0){
    searchResults.style.display = "block";
    matches.forEach(m => {
      const div = document.createElement("div");
      div.textContent = `${m.name}${m.spouse ? " — " + m.spouse : ""}${m.spouse && m.village ? " (" + m.village + ")" : ""}`;
      div.addEventListener("click", () => {
        searchResults.style.display = "none";
        searchInput.value = "";
        scrollToPerson(m.name);
      });
      searchResults.appendChild(div);
    });
  } else {
    searchResults.style.display = "none";
  }
});

function scrollToPerson(name){
  const memberCards = document.querySelectorAll(".profile");
  memberCards.forEach(card => {
    if(card.querySelector(".person-name").textContent === name){
      // Expand all ancestors
      let current = card.parentElement;
      while(current && current.tagName==="LI"){
        current.classList.add("expanded");
        current = current.parentElement.closest("li");
      }
      // Highlight
      card.classList.add("highlight");
      setTimeout(()=> card.classList.remove("highlight"), 3000);
      // Scroll
      card.scrollIntoView({ behavior: "smooth", block: "center" });
    }
  });
}
</script>
</body>
</html>
